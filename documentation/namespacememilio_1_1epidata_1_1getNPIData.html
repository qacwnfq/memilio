<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MEmilio: memilio.epidata.getNPIData Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MEmilio
   &#160;<span id="projectnumber">0.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>memilio</b></li><li class="navelem"><a class="el" href="namespacememilio_1_1epidata.html">epidata</a></li><li class="navelem"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html">getNPIData</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">memilio.epidata.getNPIData Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3e67f027b86d83863e83d55a5e863d77"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#a3e67f027b86d83863e83d55a5e863d77">activate_npis_based_on_incidence</a> (local_incid, npi_lifting_days_threshold, npi_activation_days_threshold, incid_threshold)</td></tr>
<tr class="memdesc:a3e67f027b86d83863e83d55a5e863d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes an activation vector according to a given incidence threshold, observed incidence and activation or lifting delays.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#a3e67f027b86d83863e83d55a5e863d77">More...</a><br /></td></tr>
<tr class="separator:a3e67f027b86d83863e83d55a5e863d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c4025b742116adf43054f11e277d253"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#a1c4025b742116adf43054f11e277d253">count_code_multiplicities</a> (df_npis_input, df_count, counties_considered, initial_data_frame=True)</td></tr>
<tr class="memdesc:a1c4025b742116adf43054f11e277d253"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count for all pairs of NPI codes how many times they were mentioned at the same day in the initial data frame.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#a1c4025b742116adf43054f11e277d253">More...</a><br /></td></tr>
<tr class="separator:a1c4025b742116adf43054f11e277d253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1269856bf8dd4d7e5f399198b40f3c8b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#a1269856bf8dd4d7e5f399198b40f3c8b">drop_codes_and_categories</a> (npi_codes_prior, npi_codes_prior_desc, df_npis_old, fine_resolution)</td></tr>
<tr class="memdesc:a1269856bf8dd4d7e5f399198b40f3c8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drops codes and categories from original data frame if they are not used.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#a1269856bf8dd4d7e5f399198b40f3c8b">More...</a><br /></td></tr>
<tr class="separator:a1269856bf8dd4d7e5f399198b40f3c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7f5694fba308a34126ed810b0d8752e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#aa7f5694fba308a34126ed810b0d8752e">get_npi_data</a> (fine_resolution=2, file_format=dd.defaultDict['file_format'], out_folder=dd.defaultDict['out_folder'], start_date=dd.defaultDict['start_date'], end_date=dd.defaultDict['end_date'], counties_considered=geoger.get_county_ids(), npi_activation_days_threshold=3, npi_lifting_days_threshold=5)</td></tr>
<tr class="memdesc:aa7f5694fba308a34126ed810b0d8752e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a certain resolution of recorded NPI data from the Corona Datenplattform and extracts the counties asked for and activates the NPIs if they are incidence dependent.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#aa7f5694fba308a34126ed810b0d8752e">More...</a><br /></td></tr>
<tr class="separator:aa7f5694fba308a34126ed810b0d8752e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48d1321bf357f51ff4b1ea42aa15e40b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#a48d1321bf357f51ff4b1ea42aa15e40b">main</a> ()</td></tr>
<tr class="memdesc:a48d1321bf357f51ff4b1ea42aa15e40b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main program entry.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#a48d1321bf357f51ff4b1ea42aa15e40b">More...</a><br /></td></tr>
<tr class="separator:a48d1321bf357f51ff4b1ea42aa15e40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b57ba672f66ada0905646e50096d4cd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#a0b57ba672f66ada0905646e50096d4cd">npi_sanity_check</a> (df_npis_old, df_npis_desc, df_npis_combinations_pre)</td></tr>
<tr class="separator:a0b57ba672f66ada0905646e50096d4cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55172fc8d8b2721edfa2b94961f2cbfa"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#a55172fc8d8b2721edfa2b94961f2cbfa">plot_interaction_matrix</a> (filename, directory)</td></tr>
<tr class="memdesc:a55172fc8d8b2721edfa2b94961f2cbfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads interaction matrices from hard drive and writes heatmap plots to hard drive.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#a55172fc8d8b2721edfa2b94961f2cbfa">More...</a><br /></td></tr>
<tr class="separator:a55172fc8d8b2721edfa2b94961f2cbfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea107f1cf078bcbc00929d17d326fe97"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#aea107f1cf078bcbc00929d17d326fe97">print_manual_download</a> (filename, url)</td></tr>
<tr class="memdesc:aea107f1cf078bcbc00929d17d326fe97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print download message to ask the user manually download a file.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#aea107f1cf078bcbc00929d17d326fe97">More...</a><br /></td></tr>
<tr class="separator:aea107f1cf078bcbc00929d17d326fe97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee3b2c421d9e398644dcbd5b79c9a1d2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#aee3b2c421d9e398644dcbd5b79c9a1d2">read_files</a> (directory, fine_resolution)</td></tr>
<tr class="memdesc:aee3b2c421d9e398644dcbd5b79c9a1d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads files from local directory and returns data in dataframes.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#aee3b2c421d9e398644dcbd5b79c9a1d2">More...</a><br /></td></tr>
<tr class="separator:aee3b2c421d9e398644dcbd5b79c9a1d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a808a06783c4f6eda23a30cc480122963"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#a808a06783c4f6eda23a30cc480122963">save_interaction_matrix</a> (df_interactions, filename, directory)</td></tr>
<tr class="memdesc:a808a06783c4f6eda23a30cc480122963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves interaction matrices for all subcodes in provided main codes.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#a808a06783c4f6eda23a30cc480122963">More...</a><br /></td></tr>
<tr class="separator:a808a06783c4f6eda23a30cc480122963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11ac2b9714d9298d1828454c9d587ed"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#af11ac2b9714d9298d1828454c9d587ed">validate</a> (df_npis_old, df_npis, df_infec_rki, countyID, npiCode, start_npi_cols, npi_incid_start, start_date_validation, end_date_validation, fine_resolution)</td></tr>
<tr class="memdesc:af11ac2b9714d9298d1828454c9d587ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validates the transformed NPI data based on read in NPI data list.  <a href="namespacememilio_1_1epidata_1_1getNPIData.html#af11ac2b9714d9298d1828454c9d587ed">More...</a><br /></td></tr>
<tr class="separator:af11ac2b9714d9298d1828454c9d587ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a375153e8dae814865e51d32b9b6878cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#a375153e8dae814865e51d32b9b6878cd">action</a></td></tr>
<tr class="separator:a375153e8dae814865e51d32b9b6878cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1d166690957c54c982b97f6be350f9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacememilio_1_1epidata_1_1getNPIData.html#ade1d166690957c54c982b97f6be350f9">category</a></td></tr>
<tr class="separator:ade1d166690957c54c982b97f6be350f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3e67f027b86d83863e83d55a5e863d77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e67f027b86d83863e83d55a5e863d77">&#9670;&nbsp;</a></span>activate_npis_based_on_incidence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.activate_npis_based_on_incidence </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>local_incid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>npi_lifting_days_threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>npi_activation_days_threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>incid_threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes an activation vector according to a given incidence threshold, observed incidence and activation or lifting delays. </p>
<p>In order for incidence-dependent NPIs to become active, the incidence has to exceed the threshold for npi_activation_days_threshold many days. For a formerly active NPI to be lifted, the incidence has to be below the threshold for npi_lifting_days_threshold many days.</p>
<p>If one of the former cases holds true, then the activation or lifting happens two days after the satisfaction of the criterion. This is in accordance with case reporting that can only happen after the day has finished (a 'delay' of one day is introduced here) and as these reports generally appeared in the morning for the previous day, the NPI was not directly be activated or lifted that same day but only on the next day (another delay of one day). Hence, the incidence-dependent NPI is activated or lifted two days after the threshold is/is not anymore exceeded, additionally considering the number of consecutive days to implement or lift (see second paragraph above).</p>
<p>Please see the examples for a better understanding.</p>
<p>Example 1 (Threshold=3.5): local_incid=pd.Series([2, 4, 2, 4, 2, 2, 4, 4, 2, 4, 2, 2, 2, 2]) Yesterdays incidence is over the threshold on following days: [?, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0]</p>
<p>Yesterday for first day is not known. Thus, first day's boolean is always set to the same boolean as second day's boolean. [0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0]</p>
<p>With yesterdays incidence over threshold on days: [0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0] Example 1a) ... and npi_lifting_days_threshold=2, npi_activation_days_threshold=1, the NPI will be activated on days 4 and 9 and lifted on days 8 and 14, i.e., int_active then is: [0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0] Example 1b) ... and npi_lifting_days_threshold=3, npi_activation_days_threshold=2, the NPI will be activated on day 10 (and would be lifted on day 15; which is not in the vector anymore), i.e., int_active then is: [0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1]</p>
<p>Example 2: With yesterday's incidence over threshold on days: [1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0] and npi_lifting_days_threshold=3, npi_activation_days_threshold=1, the NPI will be activated on day 2 and lifted on day 14, i.e., int_active then is: [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0]</p>
<p>Please also note that the first column will always returned as false so the dataframe should not start with dates where NPIs are implemented. For the Corona Datenplattform frame which starts from 2020-03-01 this is no problem for the first days as there were no NPIs. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">local_incid</td><td>Incidence observed in local region. </td></tr>
    <tr><td class="paramname">npi_lifting_days_threshold</td><td>Number of days for the incidence to be lower than threshold to lift the NPI. </td></tr>
    <tr><td class="paramname">npi_activation_days_threshold</td><td>Number of days the incidence threshold is exceeded before activation of the NPI. </td></tr>
    <tr><td class="paramname">incid_threshold</td><td>Threshold to be considered. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1c4025b742116adf43054f11e277d253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c4025b742116adf43054f11e277d253">&#9670;&nbsp;</a></span>count_code_multiplicities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.count_code_multiplicities </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_npis_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>counties_considered</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>initial_data_frame</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Count for all pairs of NPI codes how many times they were mentioned at the same day in the initial data frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">df_npis_input</td><td>Initial data frame read from Corona Datenplattform. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">df_count</td><td>Dictionnary of main NPI codes with empty interaction matrix (to be filled) for all codes under main code in df_count[maincode][1]. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">counties_considered</td><td>County IDs for which initial data frame is considered. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">initial_data_frame</td><td>Defines where initial data frame structure is input. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1269856bf8dd4d7e5f399198b40f3c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1269856bf8dd4d7e5f399198b40f3c8b">&#9670;&nbsp;</a></span>drop_codes_and_categories()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.drop_codes_and_categories </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>npi_codes_prior</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>npi_codes_prior_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_npis_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fine_resolution</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drops codes and categories from original data frame if they are not used. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">npi_codes_prior</td><td>NPI codes read from description sheet. </td></tr>
    <tr><td class="paramname">npi_codes_prior_desc</td><td>NPI code descriptions read from description sheet. </td></tr>
    <tr><td class="paramname">df_npis_old</td><td>Original data frame with encoding (decreed, yes or no) for different NPIs </td></tr>
    <tr><td class="paramname">fine_resolution</td><td>2 [Default] or 0 or 1. Defines which categories are considered. If '2' is set, all the subcategories (~1200) are considered. If '1' is set, all incidence levels of subcategories are merged and ~200 NPIs are considered. If '0' is chosen only the main, summarizing categories (~20) are used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns dropped codes, prior codes and reduced original data frame. </dd></dl>

</div>
</div>
<a id="aa7f5694fba308a34126ed810b0d8752e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7f5694fba308a34126ed810b0d8752e">&#9670;&nbsp;</a></span>get_npi_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.get_npi_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fine_resolution</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>file_format</em> = <code>dd.defaultDict['file_format']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>out_folder</em> = <code>dd.defaultDict['out_folder']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start_date</em> = <code>dd.defaultDict['start_date']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>end_date</em> = <code>dd.defaultDict['end_date']</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>counties_considered</em> = <code>geoger.get_county_ids()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>npi_activation_days_threshold</em> = <code>3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>npi_lifting_days_threshold</em> = <code>5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a certain resolution of recorded NPI data from the Corona Datenplattform and extracts the counties asked for and activates the NPIs if they are incidence dependent. </p>
<p>Results' data frames will be stored in the directory as: -fine_resolution=2: germany_counties_npi_subcat -fine_resolution=1: germany_counties_npi_subcat_incgrouped -fine_resolution=0: germany_counties_npi_maincat</p>
<p>Needs the files 'cases_all_county_all_dates_repdate.json' and 'county_current_population.json' which can be created by the functions getCasesData.py (with argument &ndash;rep-date) and <a class="el" href="getPopulationData_8py.html">getPopulationData.py</a>.</p>
<p>Please manually download</p><ul>
<li>kr_massnahmen_unterkategorien.csv</li>
<li>datensatzbeschreibung_massnahmen.xlsx from <a href="https://www.corona-datenplattform.de/dataset/massnahmen_unterkategorien_kreise">https://www.corona-datenplattform.de/dataset/massnahmen_unterkategorien_kreise</a> and</li>
<li>kr_massnahmen_oberkategorien.csv from <a href="https://www.corona-datenplattform.de/dataset/massnahmen_oberkategorien_kreise">https://www.corona-datenplattform.de/dataset/massnahmen_oberkategorien_kreise</a> and move it to the <em>directory</em>-path mentioned in the beginning of the function.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fine_resolution</td><td>2 [Default] or 0 or 1. Defines which categories are considered. If '2' is set, all the subcategories (~1200) are considered. If '1' is set, all incidence levels of subcategories are merged and ~200 NPIs are considered. If '0' is chosen only the main, summarizing categories (~20) are used. </td></tr>
    <tr><td class="paramname">file_format</td><td>File format which is used for writing the data. Default defined in <a class="el" href="namespacememilio_1_1epidata_1_1defaultDict.html">defaultDict</a>. </td></tr>
    <tr><td class="paramname">out_folder</td><td>Path to folder where data is written in folder out_folder/Germany. </td></tr>
    <tr><td class="paramname">start_date</td><td>[Default = '', taken from read data] Start date of stored data frames. </td></tr>
    <tr><td class="paramname">end_date</td><td>[Default = '', taken from read data] End date of stored data frames. </td></tr>
    <tr><td class="paramname">counties_considered</td><td>[Default: 'All']. Either 'All' or a list of county IDs from 1001 to 16xxx. </td></tr>
    <tr><td class="paramname">npi_activation_days_threshold</td><td>[Default: 3]. Defines necessary number of days exceeding case incidence threshold to activate NPIs. </td></tr>
    <tr><td class="paramname">npi_alifting_days_threshold</td><td>[Default: 5]. Defines necessary number of days below case incidence threshold threshold to lift NPIs. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a48d1321bf357f51ff4b1ea42aa15e40b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48d1321bf357f51ff4b1ea42aa15e40b">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main program entry. </p>

</div>
</div>
<a id="a0b57ba672f66ada0905646e50096d4cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b57ba672f66ada0905646e50096d4cd">&#9670;&nbsp;</a></span>npi_sanity_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.npi_sanity_check </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_npis_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_npis_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_npis_combinations_pre</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a55172fc8d8b2721edfa2b94961f2cbfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55172fc8d8b2721edfa2b94961f2cbfa">&#9670;&nbsp;</a></span>plot_interaction_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.plot_interaction_matrix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads interaction matrices from hard drive and writes heatmap plots to hard drive. </p>
<p>Separates diagonal and offdiagonal entries as interactions inside one NPI are counted for all incidence dependent sublevels while between NPIs only one interaction is counted if more than one sublevel is mentioned on each of the sides.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>Filename to read results from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>Directory where to read and save data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aea107f1cf078bcbc00929d17d326fe97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea107f1cf078bcbc00929d17d326fe97">&#9670;&nbsp;</a></span>print_manual_download()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.print_manual_download </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>url</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print download message to ask the user manually download a file. </p>

</div>
</div>
<a id="aee3b2c421d9e398644dcbd5b79c9a1d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee3b2c421d9e398644dcbd5b79c9a1d2">&#9670;&nbsp;</a></span>read_files()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.read_files </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>directory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fine_resolution</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads files from local directory and returns data in dataframes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">directory</td><td>Directory where data is loaded from. </td></tr>
    <tr><td class="paramname">fine_resolution</td><td>2 [Default] or 0 or 1. Defines which categories are considered. If '2' is set, all the subcategories (~1200) are considered. If '1' is set, all incidence levels of subcategories are merged and ~200 NPIs are considered. If '0' is chosen only the main, summarizing categories (~20) are used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data frames df_npis_old (Decreed, encoded NPIs for all German counties) and df_npis_desc (Description of NPIs) </dd></dl>

</div>
</div>
<a id="a808a06783c4f6eda23a30cc480122963"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a808a06783c4f6eda23a30cc480122963">&#9670;&nbsp;</a></span>save_interaction_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.save_interaction_matrix </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_interactions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves interaction matrices for all subcodes in provided main codes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">df_interactions</td><td>Dictionnary of main NPI codes with interaction matrix for all subcodes under main code in df_interactions[maincode][1]. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>Filename to store result. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>Directory where to save data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af11ac2b9714d9298d1828454c9d587ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af11ac2b9714d9298d1828454c9d587ed">&#9670;&nbsp;</a></span>validate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def memilio.epidata.getNPIData.validate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_npis_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_npis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df_infec_rki</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>countyID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>npiCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start_npi_cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>npi_incid_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start_date_validation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>end_date_validation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fine_resolution</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Validates the transformed NPI data based on read in NPI data list. </p>
<p>Also works for incidence-dependent NPIs as long as no activation or lifting delay is used. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">df_npis_old</td><td>Original data frame. </td></tr>
    <tr><td class="paramname">df_npis</td><td>New NPI data frame with potential activation of incidence- dependent NPIs. </td></tr>
    <tr><td class="paramname">df_infec_rki</td><td>Case data for incidence comparison. </td></tr>
    <tr><td class="paramname">countyID</td><td>CountyID of county to be validated. @param npiCode NPI Code of code to be validated. </td></tr>
    <tr><td class="paramname">start_npi_cols</td><td>Index of column where NPI information start in original data frame. </td></tr>
    <tr><td class="paramname">npi_incid_start</td><td>Minimum incidence for activation of NPI codes. </td></tr>
    <tr><td class="paramname">start_date_validation</td><td>Start date for validation. </td></tr>
    <tr><td class="paramname">end_date_validation</td><td>End date for validation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a375153e8dae814865e51d32b9b6878cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a375153e8dae814865e51d32b9b6878cd">&#9670;&nbsp;</a></span>action</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memilio.epidata.getNPIData.action</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ade1d166690957c54c982b97f6be350f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade1d166690957c54c982b97f6be350f9">&#9670;&nbsp;</a></span>category</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memilio.epidata.getNPIData.category</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
